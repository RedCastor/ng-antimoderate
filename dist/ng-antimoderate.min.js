!function(e){"use strict";e.module("ngAntimoderate",[]).directive("ngAntimoderate",["$timeout",function(t){return{restrict:"A",replace:!1,scope:{ngAntimoderate:"@",filter:"@",transition:"@",loadingClass:"@",loadedClass:"@",overflow:"@"},transclude:!1,link:function(n,i,s){function o(e){return parseFloat(e)*(/\ds$/.test(e)?1e3:1)}var a=i[0],r={},l=[];r.micro_src=n.ngAntimoderate||"",r.filter=n.filter||"",r.transition=n.transition||"",r.loading_class=n.loadingClass||"loading",r.loaded_class=n.loadedClass||"loaded",r.overflow=n.overflow||!0;var d=function(n,i,a){var r=n[0],d=new Image;d.onload=function(){var i=s.src;if(e.isDefined(i)&&null!==i&&""!==i){n.removeClass(a.loaded_class),n.addClass(a.loading_class);var c=new Image;c.onload=function(){n.removeClass(a.loading_class),n.addClass(a.loaded_class),t(function(){r.src=i},0),l.push(r.src),e.isDefined(objectFitImages)&&e.isFunction(objectFitImages)&&objectFitImages("img.antimoderate"),a.transition&&(r.style.transition=a.transition,t(function(){a.overflow&&(r.parentElement.style.overflow="")},o(r.style.transitionDuration))),a.filter&&(r.style.filter="none ")},c.src=i}t(function(){r.src=d.src},0),e.isDefined(objectFitImages)&&e.isFunction(objectFitImages)&&objectFitImages("img.antimoderate"),a.transition&&a.overflow&&(r.parentElement.style.overflow="hidden"),a.filter&&(r.style.filter=a.filter)},d.src=i};e.isDefined(a.src)&&(i.addClass("antimoderate"),-1===l.indexOf(a.src)&&d(i,r.micro_src,r),n.$watch("ngAntimoderate",function(e){-1===l.indexOf(a.src)&&d(i,e,r)}))}}}])}(window.angular);