{"version":3,"sources":["ng-antimoderate.js"],"names":["angular","module","directive","$timeout","restrict","replace","scope","ngAntimoderate","filter","transition","loadingClass","loadedClass","overflow","transclude","link","$scope","el","attrs","img","param","temp_loaded_src","micro_src","loading_class","loaded_class","processImage","img_el","idata","idata_img","Image","onload","orig_src","src","isDefined","removeClass","addClass","orig_img","push","objectFitImages","isFunction","style","console","log","indexOf","$watch","value","window"],"mappings":"CAAA,SAAUA;IACN;IAEAA,QAAQC,OAAO,sBAAsBC,UAAU,oBAAoB,YAAY,SAAUC;QACrF;YACIC,UAAU;YACVC,SAAS;YACTC;gBACIC,gBAAgB;gBAChBC,QAAQ;gBACRC,YAAY;gBACZC,cAAc;gBACdC,aAAa;gBACbC,UAAU;;YAEdC,YAAY;YACZC,MAAM,SAASC,QAAQC,IAAIC;gBAEvB,IAAIC,MAAMF,GAAG;gBACb,IAAIG;gBACJ,IAAIC;gBAEJD,MAAME,YAAYN,OAAOR,kBAAkB;gBAC3CY,MAAMX,SAASO,OAAOP,UAAU;gBAChCW,MAAMV,aAAaM,OAAON,cAAc;gBACxCU,MAAMG,gBAAgBP,OAAOL,gBAAgB;gBAC7CS,MAAMI,eAAeR,OAAOJ,eAAe;gBAC3CQ,MAAMP,WAAWG,OAAOH,aAAa;gBAErC,IAAIY,eAAe,SAAUC,QAAQC,OAAOP;oBAExC,IAAID,MAAMO,OAAO;oBACjB,IAAIE,YAAY,IAAIC;oBAEpBD,UAAUE,SAAS;wBACf,IAAIC,WAAWb,MAAMc;wBAErB,IAAI/B,QAAQgC,UAAUF,aAAaA,aAAa,QAAQA,aAAa,IAAI;4BAErEL,OAAOQ,YAAYd,MAAMI;4BACzBE,OAAOS,SAASf,MAAMG;4BAEtB,IAAIa,WAAW,IAAIP;4BACnBO,SAASN,SAAS;gCAEdJ,OAAOQ,YAAYd,MAAMG;gCACzBG,OAAOS,SAASf,MAAMI;gCAGtBpB,SAAS;oCACLe,IAAIa,MAAMD;mCACX;gCAEHV,gBAAgBgB,KAAKlB,IAAIa;gCAEzB,IAAI/B,QAAQgC,UAAUK,oBAAoBrC,QAAQsC,WAAWD,kBAAkB;oCAC3EA,gBAAgB;;gCAGpB,IAAIlB,MAAMV,YAAY;oCAClBS,IAAIqB,MAAM9B,aAAaU,MAAMV;;gCAEjC,IAAIU,MAAMX,QAAQ;oCACdU,IAAIqB,MAAM/B,SAAS;;gCAEvB,IAAIW,MAAMP,UAAU;oCAChBM,IAAIqB,MAAM3B,WAAW;;gCAGzB4B,QAAQC,IAAIvB;;4BAIhBiB,SAASJ,MAAMD;;wBAInB3B,SAAS;4BACLe,IAAIa,MAAMJ,UAAUI;2BACrB;wBAEH,IAAI/B,QAAQgC,UAAUK,oBAAoBrC,QAAQsC,WAAWD,kBAAkB;4BAC3EA,gBAAgB;;wBAGpB,IAAIlB,MAAMP,UAAU;4BAChBM,IAAIqB,MAAM3B,WAAW;;wBAEzB,IAAIO,MAAMX,QAAQ;4BACdU,IAAIqB,MAAM/B,SAASW,MAAMX;;;oBAIjCmB,UAAUI,MAAML;;gBAGpB,IAAI1B,QAAQgC,UAAUd,IAAIa,MAAM;oBAC5Bf,GAAGkB,SAAS;oBAEZ,IAAId,gBAAgBsB,QAAQxB,IAAIa,UAAU,GAAG;wBACzCP,aAAaR,IAAIG,MAAME,WAAWF;;oBAGtCJ,OAAO4B,OAAO,kBAAkB,SAASC;wBACrC,IAAIxB,gBAAgBsB,QAAQxB,IAAIa,UAAU,GAAG;4BACzCP,aAAaR,IAAI4B,OAAOzB;;;;;;;GAQjD0B,OAAO7C","file":"ng-antimoderate.js","sourcesContent":["(function(angular){\n    'use strict';\n\n    angular.module('ngAntimoderate', []).directive('ngAntimoderate', [ '$timeout', function ($timeout) {\n        return {\n            restrict: \"A\",\n            replace: false,\n            scope: {\n                ngAntimoderate: \"@\",\n                filter: \"@\",\n                transition: \"@\",\n                loadingClass: \"@\",\n                loadedClass: \"@\",\n                overflow: \"@\"\n            },\n            transclude: false,\n            link: function($scope, el, attrs) {\n\n                var img = el[0];\n                var param = {};\n                var temp_loaded_src = [];\n\n                param.micro_src = $scope.ngAntimoderate || \"\";\n                param.filter = $scope.filter || \"\";\n                param.transition = $scope.transition || \"\";\n                param.loading_class = $scope.loadingClass || \"loading\";\n                param.loaded_class = $scope.loadedClass || \"loaded\";\n                param.overflow = $scope.overflow !== 'false';\n\n                var processImage = function (img_el, idata, param) {\n\n                    var img = img_el[0];\n                    var idata_img = new Image();\n\n                    idata_img.onload = function() {\n                        var orig_src = attrs.src;\n\n                        if (angular.isDefined(orig_src) && orig_src !== null && orig_src !== \"\") {\n\n                            img_el.removeClass(param.loaded_class);\n                            img_el.addClass(param.loading_class);\n\n                            var orig_img = new Image();\n                            orig_img.onload = function() {\n\n                                img_el.removeClass(param.loading_class);\n                                img_el.addClass(param.loaded_class);\n\n                                //Add Timeout for workaround on IE\n                                $timeout(function () {\n                                    img.src = orig_src;\n                                }, 0);\n\n                                temp_loaded_src.push(img.src);\n\n                                if (angular.isDefined(objectFitImages) && angular.isFunction(objectFitImages)) {\n                                    objectFitImages('img.antimoderate');\n                                }\n\n                                if (param.transition) {\n                                    img.style.transition = param.transition;\n                                }\n                                if (param.filter) {\n                                    img.style.filter = \"none \";\n                                }\n                                if (param.overflow) {\n                                    img.style.overflow = \"\";\n                                }\n\n                                console.log(img);\n\n                            };\n\n                            orig_img.src = orig_src;\n                        }\n\n                        //Add Timeout for workaround on IE\n                        $timeout(function () {\n                            img.src = idata_img.src;\n                        }, 0);\n\n                        if (angular.isDefined(objectFitImages) && angular.isFunction(objectFitImages)) {\n                            objectFitImages('img.antimoderate');\n                        }\n\n                        if (param.overflow) {\n                            img.style.overflow = \"hidden\";\n                        }\n                        if (param.filter) {\n                            img.style.filter = param.filter;\n                        }\n                    };\n\n                    idata_img.src = idata;\n                };\n\n                if (angular.isDefined(img.src)) {\n                    el.addClass(\"antimoderate\");\n\n                    if (temp_loaded_src.indexOf(img.src) === -1) {\n                        processImage(el, param.micro_src, param);\n                    }\n\n                    $scope.$watch(\"ngAntimoderate\", function(value) {\n                        if (temp_loaded_src.indexOf(img.src) === -1) {\n                            processImage(el, value, param);\n                        }\n                    });\n                }\n            }\n        };\n    }]);\n\n})(window.angular);\n"],"sourceRoot":"dist"}