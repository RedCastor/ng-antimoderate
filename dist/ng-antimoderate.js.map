{"version":3,"sources":["ng-antimoderate.js"],"names":["angular","module","directive","restrict","replace","scope","ngAntimoderate","ngAntimoderateFilter","ngAntimoderateLoadingClass","ngAntimoderateLoadedClass","transclude","link","$scope","el","attrs","image_element","param","temp_loaded_src","filter","loading_class","loaded_class","antimoderate","processImage","img","idata","idata_img","Image","onload","orig_src","src","removeClass","addClass","orig_img","style","isDefined","objectFitImages","push","$watch","value","indexOf","window"],"mappings":"CAAA,SAAUA;IACN;IAEAA,QAAQC,OAAO,sBAAsBC,UAAU,oBAAoB;QAC/D;YACIC,UAAU;YACVC,SAAS;YACTC;gBACIC,gBAAgB;gBAChBC,sBAAsB;gBACtBC,4BAA4B;gBAC5BC,2BAA2B;;YAE/BC,YAAY;YACZC,MAAM,SAASC,QAAQC,IAAIC;gBAEvB,IAAIC,gBAAgBF,GAAG;gBACvB,IAAIG;gBACJ,IAAIC;gBAEJD,MAAME,SAASN,OAAOL,wBAAwB;gBAC9CS,MAAMG,gBAAgBP,OAAOJ,8BAA8B;gBAC3DQ,MAAMI,eAAeR,OAAOH,6BAA6B;gBAGzD,IAAIY;oBACAC,cAAc,SAASC,KAAKC,OAAON;wBAE/B,IAAIO,YAAY,IAAIC;wBACpBD,UAAUE,SAAS;4BAEf,IAAIC,WAAWd,MAAMe;4BACrB,IAAID,aAAa,QAAQA,aAAa,IAAI;gCAEtCf,GAAGiB,YAAYd,MAAMI;gCACrBP,GAAGkB,SAASf,MAAMG;gCAElB,IAAIa,WAAW,IAAIN;gCACnBM,SAASL,SAAS;oCAEdd,GAAGiB,YAAYd,MAAMG;oCAErBI,IAAIM,MAAMD;oCAEV,IAAIV,QAAQ;wCACRK,IAAIU,MAAMf,SAAS;;oCAEvB,IAAIlB,QAAQkC,UAAUC,kBAAkB;wCACpCA,gBAAgBZ;;oCAGpBV,GAAGkB,SAASf,MAAMI;oCAElBH,gBAAgBmB,KAAKrB,cAAcc;;gCAGvCG,SAASH,MAAMD;;4BAGnB,IAAIV,QAAQ;gCACRK,IAAIU,MAAMf,SAASA;;4BAEvBK,IAAIM,MAAMJ,UAAUI;4BAEpB,IAAI7B,QAAQkC,UAAUC,kBAAkB;gCACpCA,gBAAgBZ;;;wBAGxBE,UAAUI,MAAML;;;gBAIxB,IAAIxB,QAAQkC,UAAUnB,cAAcc,MAAM;oBAEtChB,GAAGkB,SAAS;oBAEZnB,OAAOyB,OAAO,qBAAqB,SAASC;wBAExC,IAAIrB,gBAAgBsB,QAAQxB,cAAcc,UAAU,GAAG;4BACnDR,aAAaC,aAAaP,eAAeuB,OAAOtB,MAAME;;;;;;;GAQ/EsB,OAAOxC","file":"ng-antimoderate.js","sourcesContent":["(function(angular){\n    'use strict';\n\n    angular.module('ngAntimoderate', []).directive('ngAntimoderate', [ function () {\n        return {\n            restrict: \"A\",\n            replace: false,\n            scope: {\n                ngAntimoderate: \"@\",\n                ngAntimoderateFilter: \"@\",\n                ngAntimoderateLoadingClass: \"@\",\n                ngAntimoderateLoadedClass: \"@\"\n            },\n            transclude: false,\n            link: function($scope, el, attrs) {\n\n                var image_element = el[0];\n                var param = {};\n                var temp_loaded_src = [];\n\n                param.filter = $scope.ngAntimoderateFilter || \"\";\n                param.loading_class = $scope.ngAntimoderateLoadingClass || \"loading\";\n                param.loaded_class = $scope.ngAntimoderateLoadedClass || \"loaded\";\n\n\n                var antimoderate = {\n                    processImage: function(img, idata, filter) {\n\n                        var idata_img = new Image();\n                        idata_img.onload = function() {\n\n                            var orig_src = attrs.src;\n                            if (orig_src !== null && orig_src !== \"\") {\n\n                                el.removeClass(param.loaded_class);\n                                el.addClass(param.loading_class);\n\n                                var orig_img = new Image();\n                                orig_img.onload = function() {\n\n                                    el.removeClass(param.loading_class);\n\n                                    img.src = orig_src;\n\n                                    if (filter) {\n                                        img.style.filter = 'none ';\n                                    }\n                                    if (angular.isDefined(objectFitImages)) {\n                                        objectFitImages(img);\n                                    }\n\n                                    el.addClass(param.loaded_class);\n\n                                    temp_loaded_src.push(image_element.src);\n                                };\n\n                                orig_img.src = orig_src;\n                            }\n\n                            if (filter) {\n                                img.style.filter = filter;\n                            }\n                            img.src = idata_img.src;\n\n                            if (angular.isDefined(objectFitImages)) {\n                                objectFitImages(img);\n                            }\n                        };\n                        idata_img.src = idata;\n                    }\n                };\n\n                if (angular.isDefined(image_element.src)) {\n\n                    el.addClass(\"antimoderate\");\n\n                    $scope.$watch(\"ngAntimoderateSrc\", function(value) {\n\n                        if (temp_loaded_src.indexOf(image_element.src) === -1) {\n                            antimoderate.processImage(image_element, value, param.filter);\n                        }\n                    });\n                }\n            }\n        };\n    }]);\n\n})(window.angular);\n"],"sourceRoot":"dist"}