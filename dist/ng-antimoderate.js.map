{"version":3,"sources":["ng-antimoderate.js"],"names":["angular","module","directive","restrict","replace","scope","ngAntimoderate","filter","transition","loadingClass","loadedClass","transclude","link","$scope","el","attrs","img","param","temp_loaded_src","micro_src","loading_class","loaded_class","processImage","img_el","idata","idata_img","Image","onload","orig_src","src","removeClass","addClass","orig_img","push","isDefined","objectFitImages","isFunction","style","indexOf","$watch","value","window"],"mappings":"CAAA,SAAUA;IACN;IAEAA,QAAQC,OAAO,sBAAsBC,UAAU,oBAAoB;QAC/D;YACIC,UAAU;YACVC,SAAS;YACTC;gBACIC,gBAAgB;gBAChBC,QAAQ;gBACRC,YAAY;gBACZC,cAAc;gBACdC,aAAa;;YAEjBC,YAAY;YACZC,MAAM,SAASC,QAAQC,IAAIC;gBAEvB,IAAIC,MAAMF,GAAG;gBACb,IAAIG;gBACJ,IAAIC;gBAEJD,MAAME,YAAYN,OAAOP,kBAAkB;gBAC3CW,MAAMV,SAASM,OAAON,UAAU;gBAChCU,MAAMT,aAAaK,OAAOL,cAAc;gBACxCS,MAAMG,gBAAgBP,OAAOJ,gBAAgB;gBAC7CQ,MAAMI,eAAeR,OAAOH,eAAe;gBAE3C,IAAIY,eAAe,SAAUC,QAAQC,OAAOP;oBAExC,IAAID,MAAMO,OAAO;oBACjB,IAAIE,YAAY,IAAIC;oBAEpBD,UAAUE,SAAS;wBACf,IAAIC,WAAWb,MAAMc;wBAErB,IAAID,aAAa,QAAQA,aAAa,IAAI;4BAEtCL,OAAOO,YAAYb,MAAMI;4BACzBE,OAAOQ,SAASd,MAAMG;4BAEtB,IAAIY,WAAW,IAAIN;4BACnBM,SAASL,SAAS;gCAEdJ,OAAOO,YAAYb,MAAMG;gCACzBG,OAAOQ,SAASd,MAAMI;gCAEtBL,IAAIa,MAAMD;gCACVV,gBAAgBe,KAAKjB,IAAIa;gCAEzB,IAAI7B,QAAQkC,UAAUC,oBAAoBnC,QAAQoC,WAAWD,kBAAkB;oCAC3EA,gBAAgB;;gCAGpB,IAAIlB,MAAMT,YAAY;oCAClBQ,IAAIqB,MAAM7B,aAAaS,MAAMT;;gCAEjC,IAAIS,MAAMV,QAAQ;oCACdS,IAAIqB,MAAM9B,SAAS;;;4BAK3ByB,SAASH,MAAMD;;wBAGnBZ,IAAIa,MAAMJ,UAAUI;wBACpB,IAAI7B,QAAQkC,UAAUC,oBAAoBnC,QAAQoC,WAAWD,kBAAkB;4BAC3EA,gBAAgB;;wBAGpB,IAAIlB,MAAMV,QAAQ;4BACdS,IAAIqB,MAAM9B,SAASU,MAAMV;;;oBAGjCkB,UAAUI,MAAML;;gBAGpB,IAAIxB,QAAQkC,UAAUlB,IAAIa,MAAM;oBAC5Bf,GAAGiB,SAAS;oBAEZ,IAAIb,gBAAgBoB,QAAQtB,IAAIa,UAAU,GAAG;wBACzCP,aAAaR,IAAIG,MAAME,WAAWF;;oBAGtCJ,OAAO0B,OAAO,kBAAkB,SAASC;wBACrC,IAAItB,gBAAgBoB,QAAQtB,IAAIa,UAAU,GAAG;4BACzCP,aAAaR,IAAI0B,OAAOvB;;;;;;;GAQjDwB,OAAOzC","file":"ng-antimoderate.js","sourcesContent":["(function(angular){\n    'use strict';\n\n    angular.module('ngAntimoderate', []).directive('ngAntimoderate', [ function () {\n        return {\n            restrict: \"A\",\n            replace: false,\n            scope: {\n                ngAntimoderate: \"@\",\n                filter: \"@\",\n                transition: \"@\",\n                loadingClass: \"@\",\n                loadedClass: \"@\"\n            },\n            transclude: false,\n            link: function($scope, el, attrs) {\n\n                var img = el[0];\n                var param = {};\n                var temp_loaded_src = [];\n\n                param.micro_src = $scope.ngAntimoderate || \"\";\n                param.filter = $scope.filter || \"\";\n                param.transition = $scope.transition || \"\";\n                param.loading_class = $scope.loadingClass || \"loading\";\n                param.loaded_class = $scope.loadedClass || \"loaded\";\n\n                var processImage = function (img_el, idata, param) {\n\n                    var img = img_el[0];\n                    var idata_img = new Image();\n\n                    idata_img.onload = function() {\n                        var orig_src = attrs.src;\n\n                        if (orig_src !== null && orig_src !== \"\") {\n\n                            img_el.removeClass(param.loaded_class);\n                            img_el.addClass(param.loading_class);\n\n                            var orig_img = new Image();\n                            orig_img.onload = function() {\n\n                                img_el.removeClass(param.loading_class);\n                                img_el.addClass(param.loaded_class);\n\n                                img.src = orig_src;\n                                temp_loaded_src.push(img.src);\n\n                                if (angular.isDefined(objectFitImages) && angular.isFunction(objectFitImages)) {\n                                    objectFitImages('img.antimoderate');\n                                }\n\n                                if (param.transition) {\n                                    img.style.transition = param.transition;\n                                }\n                                if (param.filter) {\n                                    img.style.filter = \"none \";\n                                }\n\n                            };\n\n                            orig_img.src = orig_src;\n                        }\n\n                        img.src = idata_img.src;\n                        if (angular.isDefined(objectFitImages) && angular.isFunction(objectFitImages)) {\n                            objectFitImages('img.antimoderate');\n                        }\n\n                        if (param.filter) {\n                            img.style.filter = param.filter;\n                        }\n                    };\n                    idata_img.src = idata;\n                };\n\n                if (angular.isDefined(img.src)) {\n                    el.addClass(\"antimoderate\");\n\n                    if (temp_loaded_src.indexOf(img.src) === -1) {\n                        processImage(el, param.micro_src, param);\n                    }\n\n                    $scope.$watch(\"ngAntimoderate\", function(value) {\n                        if (temp_loaded_src.indexOf(img.src) === -1) {\n                            processImage(el, value, param);\n                        }\n                    });\n                }\n            }\n        };\n    }]);\n\n})(window.angular);\n"],"sourceRoot":"dist"}