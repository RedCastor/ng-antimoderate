{"version":3,"sources":["ng-antimoderate.js"],"names":["angular","module","directive","restrict","replace","scope","ngAntimoderate","filter","loadingClass","loadedClass","transclude","link","$scope","el","attrs","image_element","param","temp_loaded_src","loading_class","loaded_class","antimoderate","processImage","img","idata","idata_img","Image","onload","orig_src","src","removeClass","addClass","orig_img","style","isDefined","objectFitImages","push","$watch","value","indexOf","window"],"mappings":"CAAA,SAAUA;IACN;IAEAA,QAAQC,OAAO,sBAAsBC,UAAU,oBAAoB;QAC/D;YACIC,UAAU;YACVC,SAAS;YACTC;gBACIC,gBAAgB;gBAChBC,QAAQ;gBACRC,cAAc;gBACdC,aAAa;;YAEjBC,YAAY;YACZC,MAAM,SAASC,QAAQC,IAAIC;gBAEvB,IAAIC,gBAAgBF,GAAG;gBACvB,IAAIG;gBACJ,IAAIC;gBAEJD,MAAMT,SAASK,OAAOL,UAAU;gBAChCS,MAAME,gBAAgBN,OAAOJ,gBAAgB;gBAC7CQ,MAAMG,eAAeP,OAAOH,eAAe;gBAG3C,IAAIW;oBACAC,cAAc,SAASC,KAAKC,OAAOhB;wBAE/B,IAAIiB,YAAY,IAAIC;wBACpBD,UAAUE,SAAS;4BAEf,IAAIC,WAAWb,MAAMc;4BACrB,IAAID,aAAa,QAAQA,aAAa,IAAI;gCAEtCd,GAAGgB,YAAYb,MAAMG;gCACrBN,GAAGiB,SAASd,MAAME;gCAElB,IAAIa,WAAW,IAAIN;gCACnBM,SAASL,SAAS;oCAEdb,GAAGgB,YAAYb,MAAME;oCAErBI,IAAIM,MAAMD;oCACVL,IAAIU,MAAMzB,SAAS;oCAEnB,IAAIP,QAAQiC,UAAUC,kBAAkB;wCACpCA,gBAAgBZ;;oCAGpBT,GAAGiB,SAASd,MAAMG;oCAElBF,gBAAgBkB,KAAKpB,cAAca;;gCAGvCG,SAASH,MAAMD;;4BAGnBL,IAAIU,MAAMzB,SAASA;4BACnBe,IAAIM,MAAMJ,UAAUI;4BAEpB,IAAI5B,QAAQiC,UAAUC,kBAAkB;gCACpCA,gBAAgBZ;;;wBAGxBE,UAAUI,MAAML;;;gBAIxB,IAAIvB,QAAQiC,UAAUlB,cAAca,MAAM;oBAEtCf,GAAGiB,SAAS;oBAEZlB,OAAOwB,OAAO,kBAAkB,SAASC;wBAErC,IAAIpB,gBAAgBqB,QAAQvB,cAAca,UAAU,GAAG;4BACnDR,aAAaC,aAAaN,eAAesB,OAAOrB,MAAMT;;;;;;;GAQ/EgC,OAAOvC","file":"ng-antimoderate.js","sourcesContent":["(function(angular){\n    'use strict';\n\n    angular.module('ngAntimoderate', []).directive('ngAntimoderate', [ function () {\n        return {\n            restrict: \"A\",\n            replace: false,\n            scope: {\n                ngAntimoderate: \"@\",\n                filter: \"@\",\n                loadingClass: \"@\",\n                loadedClass: \"@\"\n            },\n            transclude: false,\n            link: function($scope, el, attrs) {\n\n                var image_element = el[0];\n                var param = {};\n                var temp_loaded_src = [];\n\n                param.filter = $scope.filter || \"blur(2px)\";\n                param.loading_class = $scope.loadingClass || \"loading\";\n                param.loaded_class = $scope.loadedClass || \"loaded\";\n\n\n                var antimoderate = {\n                    processImage: function(img, idata, filter) {\n\n                        var idata_img = new Image();\n                        idata_img.onload = function() {\n\n                            var orig_src = attrs.src;\n                            if (orig_src !== null && orig_src !== \"\") {\n\n                                el.removeClass(param.loaded_class);\n                                el.addClass(param.loading_class);\n\n                                var orig_img = new Image();\n                                orig_img.onload = function() {\n\n                                    el.removeClass(param.loading_class);\n\n                                    img.src = orig_src;\n                                    img.style.filter = 'none ';\n\n                                    if (angular.isDefined(objectFitImages)) {\n                                        objectFitImages(img);\n                                    }\n\n                                    el.addClass(param.loaded_class);\n\n                                    temp_loaded_src.push(image_element.src);\n                                };\n\n                                orig_img.src = orig_src;\n                            }\n\n                            img.style.filter = filter;\n                            img.src = idata_img.src;\n\n                            if (angular.isDefined(objectFitImages)) {\n                                objectFitImages(img);\n                            }\n                        };\n                        idata_img.src = idata;\n                    }\n                };\n\n                if (angular.isDefined(image_element.src)) {\n\n                    el.addClass(\"antimoderate\");\n\n                    $scope.$watch(\"ngAntimoderate\", function(value) {\n\n                        if (temp_loaded_src.indexOf(image_element.src) === -1) {\n                            antimoderate.processImage(image_element, value, param.filter);\n                        }\n                    });\n                }\n            }\n        };\n    }]);\n\n})(window.angular);\n"],"sourceRoot":"dist"}